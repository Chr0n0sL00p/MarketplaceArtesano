{% extends "compradoresApp/base.html" %}
{% block title %}Favoritos{% endblock %}
{% block content %}
<h2>Tus Favoritos</h2>

{% if favs %}
  <div class="fav-list">
    {% for f in favs %}
      <div class="fav-item">
        <a href="{% url 'compradores:product_detail' f.product.pk %}">
          <div class="fav-thumb">
            {% if f.product.image %}<img src="{{ f.product.image.url }}" alt="{{ f.product.title }}">{% else %}
              <div class="placeholder small">Sin imagen</div>
            {% endif %}
          </div>
          <div class="fav-info">
            <h3>{{ f.product.title }}</h3>
            <p class="meta">
              {% if f.product.category %}
                {{ f.product.category.name }}
              {% else %}
                Sin categoría
              {% endif %}
              • {{ f.product.location }}
            </p>
            <strong>${{ f.product.price }}</strong>
          </div>
        </a>

        <div class="fav-actions">
          <form method="post" action="{% url 'compradores:toggle_favorite' f.product.pk %}">
            {% csrf_token %}
            <button class="btn ghost tiny">Quitar</button>
          </form>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>No tienes favoritos aún. Anda al <a href="{% url 'compradores:catalog' %}">catálogo</a> y guarda tus productos preferidos.</p>
{% endif %}

{% endblock %}
