{% extends 'base.html' %}
{% load humanize %}
{% block title %}Mi Tienda{% endblock %}
{% block content %}

<section class="auth-section">
    <h2>ğŸ›ï¸ Mi Tienda: {{ tienda.nombre }}</h2>
    <p><strong>UbicaciÃ³n:</strong> {{ tienda.ubicacion }}</p>
    <p><strong>DescripciÃ³n:</strong> {{ tienda.descripcion }}</p>

    {% if notificaciones > 0 %}
    <p style="color:red; font-weight:bold;">
        âš ï¸ Tienes {{ notificaciones }} nueva{% if notificaciones > 1 %}s{% endif %} venta{% if notificaciones > 1 %}s{% endif %} sin revisar.
    </p>
    {% endif %}

    <div style="text-align:center; margin: 35px 0 30px 0;">
        <a href="{% url 'crear_producto' %}" class="btn" style="width: auto; padding: 12px 30px;">+ Agregar Producto</a>
    </div>

    <hr>

    <h3>Mis productos</h3>

    {% if productos %}
    <div class="productos-grid">
        {% for producto in productos %}
        <div class="producto-card">
            {% if producto.imagen %}
            <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}">
            {% else %}
            <div style="width:150px; height:150px; background:#e0e0e0; border-radius:10px; display:flex; align-items:center; justify-content:center; color:#999; flex-shrink:0;">
                Sin imagen
            </div>
            {% endif %}
            
            <div class="producto-info">
                <h3>{{ producto.nombre }}</h3>
                <p>{{ producto.descripcion|truncatewords:20 }}</p>
                <p class="precio">$ {{ producto.precio|intcomma }}</p>

                <div class="acciones">
                    <a href="{% url 'editar_producto' producto.id %}" class="btn btn-edit">âœï¸ Editar</a>
                    <a href="{% url 'eliminar_producto' producto.id %}" class="btn btn-delete"
                        onclick="return confirm('Â¿Eliminar este producto?');">ğŸ—‘ï¸ Eliminar</a>
                    <a href="{% url 'simular_venta' producto.id %}" class="btn btn-success">ğŸ’° Simular venta</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p style="text-align:center; color:#666; margin:40px 0;">No tienes productos aÃºn. Â¡Agrega el primero!</p>
    {% endif %}
</section>

{% endblock %}